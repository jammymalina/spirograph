define(["require","exports","./math","./colour","./random","./math2d"],function(t,e,r,n,o,i){e.generate_random_spirograph=function(t,e,r,i){void 0===t&&(t=4e3),void 0===e&&(e=2e3);var u=o.random_int(50,Math.floor(.5*Math.min(t,e))),a=o.random_int(10,Math.floor(9*u/10)),c=o.random_float(.1,.9),h=void 0!==r?r:o.random_int(.5*-t+u,.5*t-u),_=void 0!==i?i:o.random_int(.5*-e+u,.5*e-u);return new s(h,_,u,a,c,n.golden_ratio_colour_generation())};var s=function(){function t(t,e,r,n,o,s){void 0===s&&(s={r:0,g:0,b:0}),this._center=new i.vec2,this.x=t,this.y=e,this.R=r,this.r=n,this.l=o,this.set_num_rotations(),this.colour=s}return t.prototype.to_string=function(){return"center:["+this.x+", "+this.y+"], R: "+this.R+", r: "+this.r+", l: "+this.l},t.prototype.draw=function(t,e){void 0===e&&(e=1);var r=t instanceof HTMLCanvasElement?t.getContext("2d"):t;this.k;r.beginPath(),r.lineWidth=1,r.strokeStyle=n.colour_to_ctx_style(this.colour),r.closePath(),r.stroke()},Object.defineProperty(t.prototype,"x",{get:function(){return this._center.x},set:function(t){this._center.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._center.y},set:function(t){this._center.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=Math.round(Math.abs(t)),0==this._r&&(this._r=1),this.set_num_rotations()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"R",{get:function(){return this._R},set:function(t){this._R=Math.round(Math.abs(t)),0==this._R&&(this._R=1),this.set_num_rotations()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"l",{get:function(){return this._l},set:function(t){for(this._l=Math.abs(t);0==this._l;)this._l+=r.BIAS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"num_rotations",{get:function(){return this._num_rot},enumerable:!0,configurable:!0}),t.prototype.set_num_rotations=function(){this._num_rot=this.r/r.gcd(this.r,this.R)},Object.defineProperty(t.prototype,"k",{get:function(){return this.r/this.R},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colour",{get:function(){return this._colour},set:function(t){t.r=r.clamp(t.r,0,255),t.g=r.clamp(t.g,0,255),t.b=r.clamp(t.b,0,255),void 0!==t.a&&(t.a=r.clamp(t.a,0,255)),this._colour=t},enumerable:!0,configurable:!0}),t}();e.Spirograph=s});