define(["require","exports","./colour","./math2d"],function(t,i,e,n){function s(t,i,e,n){var s=Math.atan2(e.y-i.y,e.x-i.x);t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(e.x,e.y),t.lineTo(e.x-n*Math.cos(s-Math.PI/6),e.y-n*Math.sin(s-Math.PI/6)),t.moveTo(e.x,e.y),t.lineTo(e.x-n*Math.cos(s+Math.PI/6),e.y-n*Math.sin(s+Math.PI/6)),t.stroke()}var o=function(){function t(t,i,e){var s=this;this._canvas=t,this._ctx=this.canvas.getContext("2d"),this.width=window.innerWidth,this.height=window.innerHeight,this.transformation_matrix=n.mat3.transformation_matrix(new n.vec2(.5*this.canvas.width,.5*this.canvas.height),0,new n.vec2(1,-1),"st"),i?this.event_interface=i:this.event_interface={},this.options={},e&&(this.options=e),window.addEventListener("resize",function(t){s.resize_canvas(t,window.innerWidth,window.innerHeight)})}return t.prototype.clear_screen=function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.draw_axis=function(){if(this.options.draw_axis){var t=this.options.x_axis_col?e.colour_to_ctx_style(this.options.x_axis_col):"#a7414a",i=this.options.y_axis_col?e.colour_to_ctx_style(this.options.y_axis_col):"#282726",o=void 0!==this.options.x_axis_offset?this.options.x_axis_offset:0,a=void 0!==this.options.y_axis_offset?this.options.y_axis_offset:0;this.ctx.lineWidth=1,this.ctx.strokeStyle=t,s(this.ctx,new n.vec2(-this.middle.x+o,0),new n.vec2(this.middle.x-o,0),10),this.ctx.strokeStyle=i,s(this.ctx,new n.vec2(0,-this.middle.y+a),new n.vec2(0,this.middle.y-a),10)}},t.prototype.resize_canvas=function(t,i,e){this.width=i,this.height=e,this.transformation_matrix.set_translate(this.middle),this.repaint(),this.event_interface.onresize&&this.event_interface.onresize(this,t,i,e)},t.prototype.repaint=function(){this.clear_screen(),this.ctx.setTransform.apply(this.ctx,this.transformation_matrix.ctx_transform),this.draw_axis(),this.event_interface.onrepaint&&this.event_interface.onrepaint(this)},Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ctx",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middle",{get:function(){return new n.vec2(.5*this.canvas.width,.5*this.canvas.height)},enumerable:!0,configurable:!0}),t}();i.Board=o});